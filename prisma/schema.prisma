generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  directUrl    = env("DIRECT_URL")
  relationMode = "prisma"
}

// --- ENUMS ---
enum UserRole {
  ADMINISTRATOR
  INSTRUCTOR
  STUDENT
}

enum CourseStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum LessonType {
  TEXT
  VIDEO
  QUIZ
  FILE
}

enum QuestionType {
  SINGLE_CHOICE
  MULTIPLE_CHOICE
  TRUE_FALSE
  OPEN_ENDED
}

enum FormStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum FormFieldType {
  SHORT_TEXT
  LONG_TEXT
  SINGLE_CHOICE
  MULTIPLE_CHOICE
}

enum ResourceStatus {
  ACTIVE
  ARCHIVED
  DELETED
}

enum ResourceType {
  FOLDER
  DOCUMENT
  GUIDE
  MANUAL
  POLICY
  VIDEO
  EXTERNAL_LINK
  OTHER
  DOCUMENTO_EDITABLE
  VIDEO_PLAYLIST
}

enum ResourceSharingMode {
  PUBLIC
  PRIVATE
  PROCESS
}

enum SecurityLogEvent {
  SUCCESSFUL_LOGIN
  FAILED_LOGIN_ATTEMPT
  PASSWORD_CHANGE_SUCCESS
  PASSWORD_RESET_REQUEST // Not used yet
  TWO_FACTOR_ENABLED
  TWO_FACTOR_DISABLED
  USER_ROLE_CHANGED
  USER_SUSPENDED
  COURSE_CREATED
  COURSE_UPDATED
  COURSE_DELETED
}

enum AchievementSlug {
  FIRST_ENROLLMENT
  FIRST_COURSE_COMPLETED
  PERFECT_QUIZ_SCORE
  FIVE_COURSES_COMPLETED
  TEN_COURSES_COMPLETED
  TWENTY_COURSES_COMPLETED
  HIGH_PERFORMER
  FIRST_NOTE
  FIRST_REACTION
  FIRST_RESOURCE_DOWNLOAD
  FIRST_COURSE_PUBLISHED
  LEVEL_5_REACHED
  LEVEL_10_REACHED
  LEVEL_20_REACHED
}

enum TemplateType {
  SYSTEM
  USER
}

enum RecurrenceType {
  NONE
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
}

enum RoadmapPhase {
  FASE_1
  FASE_2
  FASE_3
  FASE_4
}

// --- MODELS ---

model User {
  id                    String                 @id @default(cuid())
  email                 String                 @unique
  name                  String
  password              String
  avatar                String?
  role                  UserRole               @default(STUDENT)
  xp                    Int?                   @default(0)
  theme                 String?
  registeredDate        DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  isActive              Boolean                @default(true)
  showInLeaderboard     Boolean                @default(true)
  courses               Course[]
  enrollments           Enrollment[]
  progress              CourseProgress[]
  userAchievements      UserAchievement[]
  notes                 UserNote[]
  announcements         Announcement[]
  announcementReads     AnnouncementRead[]
  announcementReactions AnnouncementReaction[]
  formResponses         FormResponse[]
  createdForms          Form[]
  securityLogs          SecurityLog[]
  createdTemplates      LessonTemplate[]
  isTwoFactorEnabled    Boolean                @default(false)
  twoFactorSecret       String?
  createdResources      EnterpriseResource[]   @relation("Uploader")
  collaboratingResources EnterpriseResource[] @relation("Collaborators")
  resourceVersions      ResourceVersion[]
  createdEvents         CalendarEvent[]        @relation("EventCreator")
  attendedEvents        CalendarEvent[]        @relation("EventAttendees")
  eventParticipations   EventParticipation[]
  createdMessages       MotivationalMessage[]
  notifications         Notification[]
  processId             String?
  process               Process?               @relation(fields: [processId], references: [id])
  customPermissions     String[]               @default([])
  quizAttempts          QuizAttempt[]
  courseComments        CourseComment[]
  messages              Message[]
  conversations         Conversation[]         @relation("ConversationParticipants")
  assignedCourses       CourseAssignment[]     @relation("UserAssigned")
  assignedBy            CourseAssignment[]     @relation("AssignedBy")

  @@index([role])
}

model Process {
  id        String    @id @default(cuid())
  name      String    @unique
  parentId  String?
  parent    Process?  @relation("ProcessHierarchy", fields: [parentId], references: [id])
  children  Process[] @relation("ProcessHierarchy")
  users     User[]
  sharedResources EnterpriseResource[] @relation("ProcessResources")

  @@index([parentId])
}

model Course {
  id                    String                 @id @default(cuid())
  title                 String
  description           String?
  imageUrl              String?
  category              String
  status                CourseStatus           @default(DRAFT)
  instructorId          String
  instructor            User                   @relation(fields: [instructorId], references: [id])
  modules               Module[]
  enrollments           Enrollment[]
  progress              CourseProgress[]
  isMandatory           Boolean                @default(false)
  prerequisiteId        String?
  prerequisite          Course?                @relation("CoursePrerequisites", fields: [prerequisiteId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  prerequisiteFor       Course[]               @relation("CoursePrerequisites")
  certificateTemplateId String?
  certificateTemplate   CertificateTemplate?   @relation(fields: [certificateTemplateId], references: [id])
  assignments           CourseAssignment[]     @relation("CourseAssigned")
  createdAt             DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  publicationDate       DateTime?
  startDate             DateTime?
  endDate               DateTime?
  comments              CourseComment[]

  @@index([instructorId])
  @@index([prerequisiteId])
  @@index([certificateTemplateId])
  @@index([status])
}

model Module {
  id        String   @id @default(cuid())
  title     String
  order     Int
  courseId  String
  course    Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  lessons   Lesson[]

  @@index([courseId])
}

model Lesson {
  id             String                    @id @default(cuid())
  title          String
  order          Int
  moduleId       String
  module         Module                    @relation(fields: [moduleId], references: [id], onDelete: Cascade)
  contentBlocks  ContentBlock[]
  notes          UserNote[]
  completedBy    LessonCompletionRecord[]

  @@index([moduleId])
}

model ContentBlock {
  id       String     @id @default(cuid())
  type     LessonType
  content  String?
  order    Int
  lessonId String
  lesson   Lesson     @relation(fields: [lessonId], references: [id], onDelete: Cascade)
  quiz     Quiz?

  @@index([lessonId])
}

model Quiz {
  id String @id @default(cuid())
  title String
  description String?
  
  contentBlockId String? @unique
  contentBlock   ContentBlock? @relation(fields: [contentBlockId], references: [id], onDelete: Cascade)
  
  resourceId    String?             @unique
  resource      EnterpriseResource? @relation("ResourceQuiz", fields: [resourceId], references: [id], onDelete: Cascade)

  questions Question[]
  attempts QuizAttempt[]
  maxAttempts Int?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Question {
  id       String         @id @default(cuid())
  text     String
  type     String
  order    Int
  template String?
  imageUrl String?
  quizId   String
  quiz     Quiz           @relation(fields: [quizId], references: [id], onDelete: Cascade)
  options  AnswerOption[]
  attempts AnswerAttempt[]

  @@index([quizId])
}

model AnswerOption {
  id         String          @id @default(cuid())
  text       String
  isCorrect  Boolean         @default(false)
  feedback   String?
  points     Int?            @default(0)
  imageUrl   String?
  questionId String
  question   Question        @relation(fields: [questionId], references: [id], onDelete: Cascade)
  attempts   AnswerAttempt[]

  @@index([questionId])
}

model QuizAttempt {
  id            String          @id @default(cuid())
  userId        String
  user          User            @relation(fields: [userId], references: [id])
  quizId        String
  quiz          Quiz            @relation(fields: [quizId], references: [id])
  score         Float
  attemptNumber Int
  submittedAt   DateTime        @default(now())
  answers       AnswerAttempt[]

  @@index([userId])
  @@index([quizId])
}

model AnswerAttempt {
  id               String       @id @default(cuid())
  quizAttemptId    String
  quizAttempt      QuizAttempt  @relation(fields: [quizAttemptId], references: [id], onDelete: Cascade)
  questionId       String
  question         Question     @relation(fields: [questionId], references: [id])
  selectedOptionId String
  selectedOption   AnswerOption @relation(fields: [selectedOptionId], references: [id])

  @@index([quizAttemptId])
  @@index([questionId])
}

model Enrollment {
  id         String         @id @default(cuid())
  userId     String
  courseId   String
  user       User           @relation(fields: [userId], references: [id])
  course     Course         @relation(fields: [courseId], references: [id], onDelete: Cascade)
  enrolledAt DateTime       @default(now())
  progress   CourseProgress?

  @@unique([userId, courseId])
  @@index([userId])
  @@index([courseId])
}

model CourseProgress {
  id                 String                   @id @default(cuid())
  userId             String
  courseId           String
  user               User                     @relation(fields: [userId], references: [id])
  course             Course                   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  progressPercentage Int                      @default(0)
  completedAt        DateTime?
  lastActivity       DateTime                 @default(now()) @updatedAt
  completedLessons   LessonCompletionRecord[]

  @@unique([userId, courseId])
  @@index([userId])
  @@index([courseId])
}

model LessonCompletionRecord {
  id          String         @id @default(cuid())
  progressId  String
  progress    CourseProgress @relation(fields: [progressId], references: [id], onDelete: Cascade)
  lessonId    String
  lesson      Lesson         @relation(fields: [lessonId], references: [id], onDelete: Cascade)
  completedAt DateTime       @default(now())
  type        String         @default("view")
  score       Int?

  @@unique([progressId, lessonId])
  @@index([progressId])
  @@index([lessonId])
}

model UserNote {
  id        String   @id @default(cuid())
  userId    String
  lessonId  String
  user      User     @relation(fields: [userId], references: [id])
  lesson    Lesson   @relation(fields: [lessonId], references: [id], onDelete: Cascade)
  content   String
  color     String   @default("yellow")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, lessonId])
  @@index([userId])
  @@index([lessonId])
}

model Form {
  id             String         @id @default(cuid())
  title          String
  description    String?
  status         FormStatus     @default(DRAFT)
  isQuiz         Boolean        @default(false)
  creatorId      String
  creator        User           @relation(fields: [creatorId], references: [id])
  fields         FormField[]
  responses      FormResponse[]
  sharedWith     User[]         @relation("FormSharedWith")
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  headerImageUrl String?
  themeColor     String?        @default("#6366f1")
  backgroundColor String?        @default("#f8fafc")
  fontStyle      String?        @default("default")

  @@index([creatorId])
}

model FormField {
  id          String  @id @default(cuid())
  label       String
  type        String
  required    Boolean @default(false)
  placeholder String?
  options     Json?
  imageUrl    String?
  template    String?
  order       Int
  formId      String
  form        Form    @relation(fields: [formId], references: [id], onDelete: Cascade)
  responses   FormAnswer[]

  @@index([formId])
}

model FormResponse {
  id          String       @id @default(cuid())
  formId      String
  form        Form         @relation(fields: [formId], references: [id], onDelete: Cascade)
  userId      String
  user        User         @relation(fields: [userId], references: [id])
  submittedAt DateTime     @default(now())
  answers     FormAnswer[]
  score       Float?

  @@index([formId])
  @@index([userId])
}

model FormAnswer {
  id         String       @id @default(cuid())
  responseId String
  response   FormResponse @relation(fields: [responseId], references: [id], onDelete: Cascade)
  fieldId    String
  field      FormField    @relation(fields: [fieldId], references: [id], onDelete: Cascade)
  value      String

  @@index([responseId])
  @@index([fieldId])
}

model Announcement {
  id         String                 @id @default(cuid())
  title      String
  content    String
  date       DateTime               @default(now())
  authorId   String
  author     User                   @relation(fields: [authorId], references: [id])
  audience   String                 @default("ALL")
  priority   String                 @default("Normal")
  isPinned   Boolean                @default(false)
  attachments AnnouncementAttachment[]
  reads      AnnouncementRead[]
  reactions  AnnouncementReaction[]
  notifications Notification[]

  @@index([authorId])
}

model AnnouncementAttachment {
  id             String       @id @default(cuid())
  name           String
  url            String
  type           String
  size           Int
  announcementId String
  announcement   Announcement @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  createdAt      DateTime     @default(now())

  @@index([announcementId])
}

model AnnouncementRead {
  id             String       @id @default(cuid())
  userId         String
  user           User         @relation(fields: [userId], references: [id])
  announcementId String
  announcement   Announcement @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  readAt         DateTime     @default(now())

  @@unique([userId, announcementId])
}

model AnnouncementReaction {
  id             String       @id @default(cuid())
  userId         String
  user           User         @relation(fields: [userId], references: [id])
  announcementId String
  announcement   Announcement @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  reaction       String

  @@unique([userId, announcementId])
}

model SecurityLog {
  id           String           @id @default(cuid())
  event        SecurityLogEvent
  ipAddress    String?
  userAgent    String?
  country      String?
  city         String?
  userId       String?
  user         User?            @relation(fields: [userId], references: [id], onDelete: SetNull)
  emailAttempt String?
  details      String?
  createdAt    DateTime         @default(now())

  @@index([userId])
  @@index([event])
  @@index([createdAt])
}

model PlatformSettings {
  id                         String   @id @default(cuid())
  platformName               String   @default("NexusAlpri")
  projectVersion             String?  @default("1.0.0")
  allowPublicRegistration    Boolean  @default(true)
  enableEmailNotifications   Boolean  @default(true)
  emailWhitelist             String?
  require2faForAdmins        Boolean  @default(false)
  idleTimeoutMinutes         Int      @default(20)
  enableIdleTimeout          Boolean  @default(true)
  passwordMinLength          Int      @default(8)
  passwordRequireUppercase   Boolean  @default(true)
  passwordRequireLowercase   Boolean  @default(true)
  passwordRequireNumber      Boolean  @default(true)
  passwordRequireSpecialChar Boolean  @default(false)
  resourceCategories         String?
  primaryColor               String?
  secondaryColor             String?
  accentColor                String?
  backgroundColorLight       String?
  fontHeadline               String?
  fontBody                   String?
  primaryColorDark           String?
  backgroundColorDark        String?
  logoUrl                    String?
  faviconUrl                 String?
  watermarkUrl               String?
  landingImageUrl            String?
  authImageUrl               String?
  aboutImageUrl              String?
  benefitsImageUrl           String?
  announcementsImageUrl      String?
  publicPagesBgUrl           String?
  securityAuditImageUrl      String?
  tourMascotUrl              String?
  dashboardImageUrlAdmin     String?
  dashboardImageUrlInstructor String?
  dashboardImageUrlStudent   String?
  emptyStateCoursesUrl       String?
  emptyStateMyCoursesUrl     String?
  emptyStateFormsUrl         String?
  emptyStateMyNotesUrl       String?
  emptyStateResourcesUrl     String?
  emptyStateCertificatesUrl  String?
  emptyStateMotivationsUrl   String?
  emptyStateUsersUrl         String?
  emptyStateLeaderboardUrl   String?
  emptyStateAnnouncementsUrl String?
  roadmapPhases              String[] @default([])
  roadmapVisibleTo           UserRole[]
  roadmapImageUrl            String?
}

model Achievement {
  id          String            @id @default(cuid())
  slug        AchievementSlug   @unique
  name        String
  description String
  points      Int
  icon        String
  userAchievements UserAchievement[]
}

model UserAchievement {
  id            String      @id @default(cuid())
  userId        String
  achievementId String
  user          User        @relation(fields: [userId], references: [id])
  achievement   Achievement @relation(fields: [achievementId], references: [id])
  unlockedAt    DateTime    @default(now())

  @@unique([userId, achievementId])
  @@index([userId])
}

model CertificateTemplate {
  id                  String  @id @default(cuid())
  name                String  @unique
  backgroundImageUrl  String
  textColor           String  @default("#000000")
  studentNamePosition Json
  courseNamePosition  Json
  datePosition        Json
  scorePosition       Json?
  logoUrl             String?
  watermarkUrl        String?
  footerText          String?
  logoPosition        Json?
  footerTextPosition  Json?
  watermarkOpacity    Float?
  fontFamilyHeadline  String?
  fontFamilyBody      String?
  courses             Course[]
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
}

model EnterpriseResource {
  id                  String               @id @default(cuid())
  title               String
  description         String?
  type                ResourceType
  url                 String?
  content             String?
  filetype            String?
  size                Int?
  uploaderId          String
  uploader            User                 @relation("Uploader", fields: [uploaderId], references: [id])
  uploadDate          DateTime             @default(now())
  parentId            String?
  parent              EnterpriseResource?  @relation("FolderHierarchy", fields: [parentId], references: [id], onDelete: Cascade)
  children            EnterpriseResource[] @relation("FolderHierarchy")
  tags                String?
  isPublic            Boolean              @default(true)
  pin                 String?
  category            String?
  status              ResourceStatus       @default(ACTIVE)
  expiresAt           DateTime?
  version             Int                  @default(1)
  versions            ResourceVersion[]    @relation("ResourceVersions")
  collaborators       User[]               @relation("Collaborators")
  sharingMode         ResourceSharingMode  @default(PUBLIC)
  sharedWith          User[]               @relation("ResourceSharedWith")
  sharedWithProcesses Process[]            @relation("ProcessResources")
  quiz                Quiz?                @relation("ResourceQuiz")
  quizId              String?
  observations        String?
  isPinned            Boolean              @default(false)
  updatedAt           DateTime             @updatedAt

  @@index([uploaderId])
  @@index([parentId])
  @@index([type])
  @@index([status])
}

model ResourceVersion {
  id         String   @id @default(cuid())
  resourceId String
  resource   EnterpriseResource @relation("ResourceVersions", fields: [resourceId], references: [id], onDelete: Cascade)
  version    Int
  content    String
  authorId   String
  author     User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt  DateTime @default(now())

  @@unique([resourceId, version])
}

model LessonTemplate {
  id             String         @id @default(cuid())
  name           String
  description    String?
  type           TemplateType   @default(USER)
  creatorId      String?
  creator        User?          @relation(fields: [creatorId], references: [id])
  templateBlocks TemplateBlock[]
  createdAt      DateTime       @default(now())

  @@index([creatorId])
}

model TemplateBlock {
  id         String         @id @default(cuid())
  type       LessonType
  order      Int
  templateId String
  template   LessonTemplate @relation(fields: [templateId], references: [id], onDelete: Cascade)

  @@index([templateId])
}

model CalendarEvent {
  id                       String           @id @default(cuid())
  title                    String
  description              String?
  location                 String?
  start                    DateTime
  end                      DateTime
  allDay                   Boolean          @default(false)
  audienceType             String           @default("ALL")
  color                    String           @default("blue")
  creatorId                String
  creator                  User             @relation("EventCreator", fields: [creatorId], references: [id])
  attendees                User[]           @relation("EventAttendees")
  videoConferenceLink      String?
  attachments              Json[]
  recurrence               RecurrenceType   @default(NONE)
  recurrenceEndDate        DateTime?
  isInteractive            Boolean          @default(false)
  imageUrl                 String?
  participations           EventParticipation[]
  notifications            Notification[]

  @@index([creatorId])
}

model EventParticipation {
    id              String @id @default(cuid())
    userId          String
    user            User   @relation(fields: [userId], references: [id], onDelete: Cascade)
    eventId         String
    event           CalendarEvent @relation(fields: [eventId], references: [id], onDelete: Cascade)
    occurrenceDate  DateTime
    
    @@unique([userId, eventId, occurrenceDate])
    @@index([userId])
    @@index([eventId])
}


model MotivationalMessage {
  id          String   @id @default(cuid())
  title       String
  content     String?
  imageUrl    String?
  videoUrl    String?
  triggerType String
  triggerId   String // Can be courseId or 'level-5'
  creatorId   String
  creator     User     @relation(fields: [creatorId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  notifications Notification[]
  
  @@index([creatorId])
  @@index([triggerType, triggerId])
}

model Notification {
  id                         String               @id @default(cuid())
  userId                     String
  user                       User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  title                      String
  description                String?
  link                       String?
  read                       Boolean              @default(false)
  createdAt                  DateTime             @default(now())
  announcementId             String?
  announcement               Announcement?        @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  motivationalMessageId      String?              @unique
  motivationalMessage        MotivationalMessage? @relation(fields: [motivationalMessageId], references: [id], onDelete: Cascade)
  interactiveEventId         String?
  interactiveEvent           CalendarEvent?       @relation(fields: [interactiveEventId], references: [id], onDelete: Cascade)
  interactiveEventOccurrence DateTime?

  @@index([userId])
  @@index([read])
  @@index([announcementId])
}

model CourseAssignment {
  id          String   @id @default(cuid())
  courseId    String
  course      Course   @relation("CourseAssigned", fields: [courseId], references: [id], onDelete: Cascade)
  userId      String
  user        User     @relation("UserAssigned", fields: [userId], references: [id], onDelete: Cascade)
  assignedAt  DateTime @default(now())
  assignedById String
  assignedBy  User     @relation("AssignedBy", fields: [assignedById], references: [id])

  @@unique([courseId, userId])
  @@index([userId])
}

model CourseComment {
  id          String @id @default(cuid())
  content     String
  authorId    String
  author      User   @relation(fields: [authorId], references: [id], onDelete: Cascade)
  courseId    String
  course      Course @relation(fields: [courseId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  attachments ChatAttachment[]

  @@index([courseId])
  @@index([authorId])
}

model ChatAttachment {
  id              String         @id @default(cuid())
  name            String
  url             String
  type            String
  size            Int
  courseCommentId String?
  courseComment   CourseComment? @relation(fields: [courseCommentId], references: [id], onDelete: Cascade)
  messageId       String?
  message         Message?       @relation(fields: [messageId], references: [id], onDelete: Cascade)
  createdAt       DateTime       @default(now())
  
  @@index([courseCommentId])
  @@index([messageId])
}

model Conversation {
  id           String    @id @default(cuid())
  participants User[]    @relation("ConversationParticipants")
  messages     Message[]
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Message {
  id             String    @id @default(cuid())
  content        String?
  createdAt      DateTime  @default(now())
  authorId       String
  author         User      @relation(fields: [authorId], references: [id], onDelete: Cascade)
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  attachments    ChatAttachment[]

  @@index([conversationId])
}

model GameSession {
  id        String    @id @default(cuid())
  formId    String
  form      Form      @relation(fields: [formId], references: [id], onDelete: Cascade)
  pin       String    @unique
  status    String // LOBBY, ACTIVE, FINISHED
  players   Player[]
  createdAt DateTime  @default(now())

  @@index([formId])
}

model Player {
  id            String   @id @default(cuid())
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  gameSessionId String
  gameSession   GameSession @relation(fields: [gameSessionId], references: [id], onDelete: Cascade)
  nickname      String
  score         Int      @default(0)
  responses     PlayerResponse[]
  joinedAt      DateTime @default(now())

  @@unique([userId, gameSessionId])
  @@index([gameSessionId])
}

model PlayerResponse {
  id             String @id @default(cuid())
  playerId       String
  player         Player @relation(fields: [playerId], references: [id], onDelete: Cascade)
  questionId     String
  optionId       String
  isCorrect      Boolean
  scoreAwarded   Int
  responseTimeMs Int
  createdAt      DateTime @default(now())

  @@index([playerId])
}

model RoadmapItem {
  id          String   @id @default(cuid())
  date        DateTime
  phase       RoadmapPhase
  title       String
  description String
  icon        String
  color       String
  imageUrl    String?
  createdAt   DateTime @default(now())
}
